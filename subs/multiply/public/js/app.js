// Generated by CoffeeScript 1.4.0
(function() {
  var DONE, SECONDS, handle, refreshTime, testIsDone;

  SECONDS = 150;

  DONE = false;

  testIsDone = function() {
    if (DONE) {
      return;
    }
    DONE = true;
    clearInterval(handle);
    if (SECONDS === 0) {
      alert("DONE");
    }
    return $("#questions input").each(function(i, elem) {
      var answer, jqElem;
      jqElem = $(elem);
      answer = jqElem.attr("data-answer");
      if (jqElem.attr("value") === answer) {
        $(elem).addClass("good");
      } else {
        $(elem).addClass("bad");
      }
      return jqElem.attr("disabled", "disabled");
    });
  };

  handle = void 0;

  refreshTime = function() {
    $('.timeleft').html("" + SECONDS);
    if (SECONDS === 0) {
      testIsDone();
    }
    return SECONDS = SECONDS - 1;
  };

  $(function() {
    var i, j, questions, questionsDOM, _i, _j;
    questionsDOM = $('#questions');
    questions = [];
    for (i = _i = 2; _i <= 9; i = ++_i) {
      for (j = _j = 2; _j <= 9; j = ++_j) {
        questions.push({
          left: i,
          right: j,
          answer: i * j
        });
      }
    }
    questions.sort(function() {
      return Math.round(Math.random()) - 0.5;
    });
    questions = questions.slice(0, 35);
    questions.forEach(function(q) {
      return questionsDOM.append("<div class=\"question\">" + q.left + " x " + q.right + " = <input data-answer=\"" + q.answer + "\" type=\"text\" pattern=\"[0-9]*\"></input></div>\n");
    });
    refreshTime();
    handle = setInterval(refreshTime, 1000);
    return $('input[type=text]:first').focus();
  });

  window.done = testIsDone;

}).call(this);
